As a small thank you to the <a href="http://redcareditor.com/" title="Redcar" target="_blank">Redcar</a> team for such a great editor and in the spirit of giving a little bit back I'm documenting the process of creating my first plugin.

<h4>Introduction</h4>
I really like the idea of the <a href="http://redcareditor.com/" title="Redcar" target="_blank">Redcar</a> editor. Its written in Ruby, its possible to write your own plugins what's not to like? Though I must confess I don't use it as my day to day editor, I wonder if writing my own plugins will change that.

Let see how easy it is to write a plugin for <a href="http://redcareditor.com/" title="Redcar" target="_blank">Redcar</a>.

<h4>What's da big idea</h4>
The idea for my first plugin is rather ambitious considering I've no idea how to write a plugin. I'd like to replicate some of the functionality of <a href="http://livereload.com/" target="_blank">Live Reload</a> - basically refresh a browser web page whenever I save a file in Redcar. This will save me constantly hitting refresh in the browser when working with <a href="http://documentcloud.github.com/backbone/" target="_blank">Backbone.js</a>.

I'm hoping to trap the save event of <a href="http://redcareditor.com/" title="Redcar" target="_blank">Redcar</a> and call out to my browser (Chrome) and tell it to refresh the page.

<h4>Install Redcar</h4>
I first followed the install instructions:

<a href="http://github.com/redcar/redcar/wiki/installation" target="_blank">http://github.com/redcar/redcar/wiki/installation</a>

All good no problems there (I'm running on a Mac OSX 10.7.1)

<h4>Plugin Guides</h4>
I then read the plugin guides I found here:
<ul>
  <li><a href="http://simplic.it/blog/my-first-redcar-plugin.html" target="_blank">http://simplic.it/blog/my-first-redcar-plugin.html</a></li>
  <li><a href="http://quickwebdesign.net/documents/20110710_redcar_plugins.pdf" target="_blank">http://quickwebdesign.net/documents/20110710_redcar_plugins.pdf</a></li>
</ul>

<h4>Plugin.rb</h4>
Setting up a plugin is really easy and well described in the guides listed above. Redcar itself is made up of a bunch of plugin's so there are no end of great examples to follow in the source code (<a href="http://github.com/redcar/redcar" target="_blank">http://github.com/redcar/redcar</a>)

For trapping the save event I dug into the source code and came across the method <strong>project_refresh_task_type</strong> which is called on all plugins after a save. To hook into this process my plugin simply defines the method:

<code>
def self.project_refresh_task_type
    RefreshBrowser  
end
</code>

This may not be the best place to hook into save, Redcar has the concept of events and that may be a better place to look but for now this is working.

<h4>Browser refresh script</h4>

RefreshBrowser is a Redcar::Task which I have created to run the browser refresh script.

I managed to find a script to refresh the browser here:

<a href="http://brettterpstra.com/watch-for-file-changes-and-refresh-your-browser-automatically/">http://brettterpstra.com/watch-for-file-changes-and-refresh-your-browser-automatically/</a>

The script uses a keyword to identify which tab to refresh in the browser so I needed this to be saved and configurable somewhere. Luckily Redcar has a storage mechanism built right in.

<h4>Storage</h4>
Redcar's storage mechanism allows you to easily store configuration data into a yaml file. 

<code>
def storage
	@storage ||= Plugin::Storage.new('live_reload_plugin')
	@storage.set_default('keyword', '')
	@storage
end
</code>

Here I am using this mechanism to store the 'keyword' used by the RefreshBrowser task. This allows the user to edit the yaml file via the Redcar plugin preferences. It's also possible to setup a nice edit page but for now this will do.

<h4>Source</h4>
You can find the source for this plugin here:

<a href="http://github.com/justinramel/redcar_plugin_live_reload" target="_blank">http://github.com/justinramel/redcar_plugin_live_reload</a>

<h4>Was it easy?</h4>
YES! The Redcar team have done a great job and made it incredibly easy to create your own plugins. I made a useful (for me at least) working plugin within a couple of hours. I think I've spent more time fussing over this blog post than developing the plugin.